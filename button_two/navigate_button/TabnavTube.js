import React from 'react';
import { TouchableOpacity, SafeAreaView, Text, View, Image, ScrollView } from 'react-native';
import { colors, spacing, borderRadius, typography, shadows } from '../../theme';
import { ScaledText } from '../../components/FontScaling';

const Tabnav = ({ navigation }) => {
    const handleButtonPress = (screenName) => {
        navigation.navigate(screenName);
    };

    const TubeOption = ({ title, subtitle, icon, onPress, accessibilityLabel }) => (
        <TouchableOpacity
            onPress={onPress}
            style={{
                backgroundColor: colors.light.surface,
                borderRadius: borderRadius.xl,
                padding: spacing.xl,
                marginBottom: spacing.lg,
                ...shadows.md,
                borderWidth: 2,
                borderColor: 'rgba(37, 99, 235, 0.2)',
                minHeight: 140,
                width: '100%',
                maxWidth: 320,
                justifyContent: 'center',
                alignItems: 'center',
            }}
            accessibilityLabel={accessibilityLabel}
            accessibilityRole="button"
        >
            {icon ? (
                <Image
                    source={icon}
                    style={{ width: 80, height: 80, marginBottom: spacing.sm }}
                    resizeMode="contain"
                />
            ) : (
                <Text style={{ fontSize: 48, marginBottom: spacing.sm }}>
                    ü´Å
                </Text>
            )}
            <Text style={[typography.h3, {
                color: colors.light.primary,
                marginBottom: spacing.xs,
                textAlign: 'center'
            }]}
            allowFontScaling={false}
            maxFontSizeMultiplier={1.2}>
                {title}
            </Text>
            <Text style={[typography.body2, {
                color: colors.light.text.secondary,
                textAlign: 'center',
                lineHeight: 20
            }]}
            allowFontScaling={false}
            maxFontSizeMultiplier={1.2}>
                {subtitle}
            </Text>
        </TouchableOpacity>
    );

    return (
        <SafeAreaView style={{ flex: 1, backgroundColor: colors.light.background }}>
            <ScrollView
                style={{ flex: 1 }}
                contentContainerStyle={{
                    flexGrow: 1,
                    padding: spacing.lg,
                    paddingBottom: spacing.xl
                }}
            >
                {/* Header */}
                <View style={{ alignItems: 'center', marginBottom: spacing.xl }}>
                    <Text style={[typography.h1, { color: colors.light.primary, marginBottom: spacing.sm }]}
                    allowFontScaling={false}
                    maxFontSizeMultiplier={1.2}>
                        ü´Å –†–∞—Å—á–µ—Ç —Ç—Ä—É–±–æ–∫
                    </Text>
                    <Text style={[typography.body1, { color: colors.light.text.secondary, textAlign: 'center' }]}
                    allowFontScaling={false}
                    maxFontSizeMultiplier={1.2}>
                        –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç—Ä—É–±–∫–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
                    </Text>
                </View>

                {/* Options */}
                <View style={{
                    flex: 1,
                    justifyContent: 'center',
                    alignItems: 'center',
                    paddingVertical: spacing.lg
                }}>
                    <TubeOption
                        title="–≠–Ω–¥–æ—Ç—Ä–∞—Ö–µ–∞–ª—å–Ω–∞—è"
                        subtitle="–†–∞—Å—á–µ—Ç –ø–æ —Ä–æ—Å—Ç—É, –≤–æ–∑—Ä–∞—Å—Ç—É –∏ –≤–µ—Å—É —Ä–µ–±–µ–Ω–∫–∞"
                        icon={require('./1.jpeg')}
                        onPress={() => handleButtonPress('IntubationTubeCalculation')}
                        accessibilityLabel="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á–µ—Ç—É —ç–Ω–¥–æ—Ç—Ä–∞—Ö–µ–∞–ª—å–Ω–æ–π —Ç—Ä—É–±–∫–∏"
                    />

                    <TubeOption
                        title="–õ–∞—Ä–∏–Ω–≥–µ–∞–ª—å–Ω–∞—è"
                        subtitle="–†–∞—Å—á–µ—Ç –ø–æ –≤–µ—Å—É –∏ —Ä–æ—Å—Ç—É"
                        icon={require('./2.jpeg')}
                        onPress={() => handleButtonPress('Button_Tube_Calculation')}
                        accessibilityLabel="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á–µ—Ç—É –ª–∞—Ä–∏–Ω–≥–µ–∞–ª—å–Ω–æ–π —Ç—Ä—É–±–∫–∏"
                    />
                </View>

                {/* Info */}
                <View style={{
                    backgroundColor: colors.light.surface,
                    borderRadius: borderRadius.xl,
                    padding: spacing.lg,
                    borderWidth: 1,
                    borderColor: colors.light.divider,
                }}>
                    <Text style={[typography.caption, {
                        color: colors.light.text.secondary,
                        textAlign: 'center',
                        lineHeight: 18
                    }]}
                    allowFontScaling={false}
                    maxFontSizeMultiplier={1.2}>
                        ‚Ä¢ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º{'\n'}
                        ‚Ä¢ –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è{'\n'}
                        ‚Ä¢ –ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä
                    </Text>
                </View>
            </ScrollView>
        </SafeAreaView>
    );
};

export default Tabnav;
